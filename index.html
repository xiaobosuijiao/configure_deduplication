<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>网络文本去重工具</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="all.min.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-left">
                    <h1><i class="fas fa-network-wired"></i> 多行文本去重工具
                        <button id="theme-toggle" class="theme-toggle-btn" title="切换主题" onclick="simpleToggleTheme()">
                            <i class="fas fa-moon"></i>
                            <span class="theme-text">暗色主题</span>
                        </button>
                        <a href="help.html" class="theme-toggle-btn" title="查看帮助文档" style="text-decoration: none;">
                            <i class="fas fa-question-circle"></i>
                            <span class="theme-text">帮助</span>
                        </a>
                    </h1>
                    <!-- <p class="subtitle">自动识别并删除重复的文本块，支持多种网络设备文本格式</p> -->
                </div>
            </div>
        </header>

        <div class="main-content">
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title"><i class="fas fa-sign-in-alt"></i> 输入文本</div>
                    <div class="counter">行数: <span id="input-line-count">0</span></div>
                    <div class="panel-header-actions">
                        <div class="file-upload-wrapper">
                            <input type="file" id="file-input" accept=".txt,.conf,.cfg,.config,.log"
                                style="display: none;">
                            <button id="file-upload-btn" class="btn btn-secondary btn-small">
                                <i class="fas fa-upload"></i> 导入文件
                            </button>
                        </div>
                    </div>
                </div>
                <div class="textarea-wrapper">
                    <div class="line-numbers" id="input-line-numbers"></div>
                    <textarea id="input-text" class="input-area" placeholder="请粘贴您的文本..."></textarea>
                </div>
            </div>

            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title"><i class="fas fa-sign-out-alt"></i> 输出去重结果</div>
                    <div class="counter">行数: <span id="output-line-count">0</span></div>
                    <div class="panel-header-actions">
                        <button id="export-btn" class="btn btn-secondary btn-small">
                            <i class="fas fa-download"></i> 导出结果
                        </button>
                    </div>
                </div>
                <div class="textarea-wrapper">
                    <div class="line-numbers" id="output-line-numbers"></div>
                    <textarea id="output-text" class="output-area" readonly placeholder="去重后的文本将显示在这里..."></textarea>
                </div>
            </div>

            <div class="control-panel">
                <div class="control-row">
                    <div class="control-group">
                        <label for="keywords"><i class="fas fa-key"></i> 文本块起始关键字</label>
                        <input type="text" id="keywords" class="keywords-input" value="controller, router, interface">
                        <p class="hint">多个关键字用英文逗号分隔，程序将识别以这些关键字开头的文本块</p>
                    </div>
                    <div class="control-group">
                        <label for="block-end"><i class="fas fa-flag-checkered"></i> 块结束标记 (可选)</label>
                        <input type="text" id="block-end" class="keywords-input" value="!">
                        <p class="hint">文本块的结束标记，默认为"!"。如果为空，则自动检测到下一个关键字前结束</p>
                    </div>
                </div>

                <div class="buttons">
                    <button id="process-btn" class="btn btn-primary">
                        <i class="fas fa-bolt"></i> 开始去重处理
                    </button>
                    <button id="copy-btn" class="btn btn-secondary">
                        <i class="fas fa-copy"></i> 复制结果
                    </button>
                    <button id="clear-btn" class="btn btn-secondary">
                        <i class="fas fa-trash-alt"></i> 清空输入
                    </button>
                    <button id="example-btn" class="btn btn-secondary">
                        <i class="fas fa-file-alt"></i> 加载示例
                    </button>
                    <div class="export-details-wrapper" style="display: flex; align-items: center; gap: 5px;">
                        <button id="export-details-btn" class="btn btn-secondary">
                            <i class="fas fa-file-export"></i> 导出统计结果
                        </button>
                        <select id="export-format" class="btn btn-secondary"
                            style="padding: 8px 12px; border-radius: 8px; border: 1px solid var(--input-border); background-color: var(--input-bg); color: var(--text-primary);">
                            <option value="json">JSON (.txt)</option>
                            <option value="csv">CSV格式</option>
                        </select>
                    </div>
                </div>


                <div class="stats">
                    <div class="stat-item">
                        <i class="fas fa-clock"></i> 处理耗时: <span id="process-time" class="stat-value">0</span> 毫秒
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-cubes"></i> 原文本块: <span id="original-blocks" class="stat-value">0</span> 个
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-check-circle success"></i> 保留块: <span id="kept-blocks"
                            class="stat-value success">0</span> 个
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-times-circle removed"></i> 删除块: <span id="removed-blocks"
                            class="stat-value removed">0</span> 个
                    </div>
                </div>

                <!-- 进度指示器 -->
                <div id="progress-container" class="progress-container" style="display: none; margin-top: 20px;">
                    <div class="progress-header">
                        <i class="fas fa-spinner fa-spin"></i>
                        <span id="progress-text">正在处理...</span>
                    </div>
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                    <div class="progress-stats">
                        <span id="progress-detail">已处理 0 行 / 总共 0 行</span>
                        <span id="progress-percentage">0%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- 版权信息 -->
        <footer class="footer">
            <div class="footer-content">
                <p>© 2025 多行文本去重工具 | bbsui@fiberhome.com</p>
            </div>
        </footer>
    </div>

    <div id="notification" class="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">操作成功！</span>
    </div>

    <script src="script.js"></script>
</body>

</html>
